
  

<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>P4 Drawing</title>

  <link rel="stylesheet" type="text/css" href="/static/draw/vendor/bootstrap/css/bootstrap.min.css">
  <script type="text/javascript" src="/static/draw/vendor/jquery/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="/static/draw/vendor/paper/paper-full.min.js"></script>
  
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <style type="text/css">
    .head{
      width:70vw;
      border-bottom:solid 1px #8b6914;
      font-size:70px;
      color:#8b6914;
      margin-top:3vh;
      margin-left:5vw;
    }
    
    .main{
        background-color:#fff8dc;
        height:100vh;
        display:flex;
        flex-direction:column;
      }
    
    .inputarea{   
        width:80vw;
        display:flex;
        flex-direction:column;
        padding-left:5vw;
        padding-top:2vh;
        padding-bottom:2vh;
      }
      
      .inputbox{
        width:70vw;
        border:solid 1px #8b6914;
        outline:none;
        margin-top:2vh;
        font-size:50px;
        height:15vh;
      }
      
      .inputline{
        font-size:50px;
        color:#8b6914;
      }
      
      .submit{
        margin-top:2vh;
        border-color:#8b6914;
        color:#8b6914;
        background-color:transparent;
        width:70vw;
        border-style:solid;
        border-width:1px;
        outline:none;
        font-size:50px
      }
    
    .modal-content{
      width:80vw;
      margin-top:25vh
    }
    
    .modal-dialog{
      display:flex;
      justify-content:center;
    }
    
    .add{
      width:10vw;
      margin-left:5vw;
      margin-top:1vh;
    }
    
    .newchores{
      color:#8b6914;
      font-size:50px;
      margin-top:2vh;
      margin-left:5vw;
    }
    
    .assignedchore{
      color:#8b6914;
      font-size:20px;
      margin-top:1vh;
      margin-left:5vw;
    }
    
    .username{
      color:#8b6914;
      font-size:20px;
      margin-top:2vh;      
    }
    
    .avatar{
      width:10vw;
      margin-left:5vw;
      margin-right:1vw;
    }
    
    .grab{
      border:1px solid #8b6914;
      width:15vw;
      display:flex;
      justify-content:center;
    }
    
    .newchoreitem{
      display:flex;
      flex-direction:row;
      justify-content:space-between;
      width:85vw;
      margin-top:1vh;
    }
    
  .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
  }

  .tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
  }

  .tab button:hover {
    background-color: #ddd;
  }

  .tab button.active {
    background-color: #ccc;
  }

  .tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
  }
    
  </style>

</head>
  
<body>
  <!-- Tab links -->
  <div class="tab">
    <button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen">Mine</button>
    <button class="tablinks" onclick="openCity(event, 'Paris')">All</button>
    <button class="tablinks" onclick="openCity(event, 'Tokyo')">Up for Grabs</button>
  </div>

  <!-- Tab content -->
  <div id="London" class="tabcontent">
    <div class='head'>
      My chores
    </div>
    <div class='mychores'>
  </div>

  <div id="Paris" class="tabcontent">
    <div class='head'>
      All chores
    </div>
    <div class='assigned'>
      
    </div> 
  </div>

  <div id="Tokyo" class="tabcontent">
    <div class='head'>
      Up-to-grab chores
    </div>
    <div class='newchores'>
    </div>
  
  <div class='main'>
    

    
    
      
    </div>
    <img class='add' src="data:image/svg+xml;base64,
PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTIgNTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUyIDUyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiPjxnPjxnPgoJPHBhdGggZD0iTTI2LDBDMTEuNjY0LDAsMCwxMS42NjMsMCwyNnMxMS42NjQsMjYsMjYsMjZzMjYtMTEuNjYzLDI2LTI2UzQwLjMzNiwwLDI2LDB6IE0yNiw1MEMxMi43NjcsNTAsMiwzOS4yMzMsMiwyNiAgIFMxMi43NjcsMiwyNiwyczI0LDEwLjc2NywyNCwyNFMzOS4yMzMsNTAsMjYsNTB6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiM4QjY5MTQiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3BhdGg+Cgk8cGF0aCBkPSJNMzguNSwyNUgyN1YxNGMwLTAuNTUzLTAuNDQ4LTEtMS0xcy0xLDAuNDQ3LTEsMXYxMUgxMy41Yy0wLjU1MiwwLTEsMC40NDctMSwxczAuNDQ4LDEsMSwxSDI1djEyYzAsMC41NTMsMC40NDgsMSwxLDEgICBzMS0wLjQ0NywxLTFWMjdoMTEuNWMwLjU1MiwwLDEtMC40NDcsMS0xUzM5LjA1MiwyNSwzOC41LDI1eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojOEI2OTE0IiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9wYXRoPgo8L2c+PC9nPiA8L3N2Zz4=" />
  </div>
  
  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class='inputarea'>
          <div class='inputline'>
            please input a chore: 
          </div>
          <textarea name="chore" class='inputbox' value=""></textarea>
          <input type="submit" value="Submit" class='submit'/>
        </div>
      </div>

    </div>
  </div> 
  
  
  
  
</body>
<script>
  
  function openCity(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }
  
  document.getElementById("defaultOpen").click();
  // here
  
  function getQueryString(name) {
    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
    var r = window.location.search.substr(1).match(reg);
    if (r != null) {
        return unescape(r[2]);
    }
    return null;
  }
  
  var storage=window.sessionStorage;
  var users = JSON.parse(storage.users);
  var chores = JSON.parse(storage.chores);
  var currentuser = getQueryString("name");
  
  for (var index in users) {
     
  }
  
  var newchorelist=[];
  
  
  var socket = new WebSocket(
    'wss://p3-websockets-harperKKK-harperkwok828073.codeanyapp.com/ws/draw');

  $( ".add" ).click(function(e){
    $("#myModal").modal('show');
  })
  
//    $( ".grab" ).click()
  
  $( ".submit" ).click(function(e){
    var chore = document.getElementsByName("chore")[0].value;
    $( ".inputbox" ).val('');
    $("#myModal").modal('hide');
    var newchore = new Object(); 
    newchore.chore = chore;
    socket.send(JSON.stringify(newchore));
  })

  // triggered when receiving a message from the server
  socket.onmessage = function(receivedMessage) {
    // do something when you receive a message

    var data = JSON.parse(receivedMessage.data);
    $( ".newchores" ).append("<div class='newchoreitem'><li>"
          +data.chore+"</li><div class='grab'>grab</div></div>");
    newchorelist.push(data.chore);
  
  };

  // notify console if socket closes unexpectedly
  socket.onclose = function(e) {
    console.error('Chat socket closed unexpectedly');
  };

</script>
</html>